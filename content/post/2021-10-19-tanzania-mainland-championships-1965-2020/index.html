---
title: Tanzania Mainland Football Championships; 1965 - 2020 âš½
author: 'Peter Boshe'
date: '2021-10-19'
categories: ["Sports"]
tags: ["DataViz", "Unguided project"]
output:
  blogdown::html_page:
    toc: true
    toc_depth: 2
images: []
summary: "This is a racing bar chart of the male football championships and the respective teams that have won over the past half century"
draft: false
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>

<div id="TOC">
<ul>
<li><a href="#setting-up-the-environment">setting up the environment</a></li>
<li><a href="#pre-processing">pre-processing</a></li>
<li><a href="#make-gif">Make Gif</a></li>
</ul>
</div>

<p>This is a racing bar chart of the championships and the respective teams that have won over the past half century(acc. to <a href="http://www.rsssf.com/tablest/tanzchamp.html">Data</a>),</p>
<p>Would you have guessed that less than 10 teams (only 9 teams) have won since the conception of the cup? ðŸ™€</p>
<div id="setting-up-the-environment" class="section level2">
<h2>setting up the environment</h2>
<pre class="r"><code># clear environment 
rm(list = ls())

# setting environment 
library(readxl)
library(tidyverse)
library(gganimate)
library(lubridate)
library(gifski)
library(png)
library(knitr)

# loading data 
df &lt;- read_excel(&quot;Tanzania mainland championships.xlsx&quot;)</code></pre>
</div>
<div id="pre-processing" class="section level2">
<h2>pre-processing</h2>
<pre class="r"><code>df2 &lt;- df %&gt;% 
  mutate(Cup = 1) %&gt;% 
  complete(Team, Year) %&gt;% 
  replace_na(list(Cup = 0)) %&gt;%  
  group_by(Team) %&gt;% 
  mutate(count = cumsum(Cup))
  </code></pre>
<pre class="r"><code>df2 %&gt;% 
  group_by(Year) %&gt;% 
  arrange(Year, -count) %&gt;% 
  #assign ranking
  mutate(rank = 1:n()) -&gt;
ranked_by_year</code></pre>
<pre class="r"><code>my_theme &lt;- theme_classic(base_family = &quot;Times&quot;) +
  theme(axis.text.y = element_blank()) +
  theme(axis.ticks.y = element_blank()) +
  theme(axis.line.y = element_blank()) +
  theme(legend.background = element_rect(fill = &quot;gainsboro&quot;)) +
  theme(plot.background = element_rect(fill = &quot;gainsboro&quot;)) +
  theme(panel.background = element_rect(fill = &quot;gainsboro&quot;))</code></pre>
<div id="static-plot" class="section level3">
<h3>Static Plot</h3>
<pre class="r"><code>ranked_by_year %&gt;% 
   ggplot(
  aes(xmin = 0,
      xmax = count,
      ymin = rank - .45,
      ymax = rank + .45,
      y = rank,
    fill = Team
  )
) +
  geom_rect(alpha = .7) +  
  geom_text(col = &quot;gray13&quot;,  
            hjust = &quot;right&quot;,  
            aes(label = Team),  
            x = -1) + 
    geom_text(aes(count + 1,
                  label = round(count)),
            color = &quot;black&quot;,
            position = &quot;identity&quot;,
            size = 2.5) +
  scale_y_reverse() +
  # scale_x_continuous(
  #   limits = c(-39, 27),
  #   breaks = 1:30) +
  labs(
    title = &quot;Mainland Championships&quot;,
    x = &quot;Cups Won&quot;,
    y = &quot;&quot;
  ) + 
    facet_wrap(~ Year) +
  my_theme -&gt;
my_plot</code></pre>
</div>
</div>
<div id="make-gif" class="section level2">
<h2>Make Gif</h2>
<pre class="r"><code>my_plot +  
  facet_null() +  
  scale_x_continuous(
    limits = c(-10, 40),
    breaks = seq(0, 30, 5)) +
  geom_text(x = 30, y = -7.5,  
            family = &quot;Times&quot;,  
            aes(label = as.character(Year)),  
            size = 20, col = &quot;grey18&quot;) +  
  aes(group = Team) +  
  transition_time(Year) +
  enter_fade() +
  exit_fade() -&gt; p



  animate(p, fps = 4, duration = 27, width = 800, height = 600)</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-4-1.gif" style="display: block; margin: auto;" /></p>
</div>
